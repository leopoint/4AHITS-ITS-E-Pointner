# Bericht am 13.10.2025
## Vorraussetztungen
- Kali auf Bridged
- Metasploitable auf Bridged   
- somit sind sie mit Labornetz verbunden


# Übung ping
## Ip Herrausfinden (Kali & Meta.)
**Kali**: ip a  = 192.168.14.50  
**Metasploitable**: ifconfig = 192.168.14.51

## ping Befehle
-c <count>   
Anzahl der Pakete

-i <interval>      
Intervall zwischen Paketen in Sekunden

-s <size>    
Größe des ICMP-Payloads in Bytes,

-W <timeout>    
Wartezeit (Sekunden) auf Antwort pro Paket

-w <deadline>   
Gesamte Laufzeit in Sekunden

## Welcher Netzwerkdienst / Protokoll?

ping benutzt ICMP (Internet Control Message Protocol).

Bei IPv4: Echo Request

Bei IPv6: ICMPv6 Echo Request

ICMP ist kein TCP/UDP-Dienst es hat keine Ports, sondern arbeitet auf der IP-Schicht.

Firewalls blockieren pings oft da man damit herrausfunden kann ob das Gerät erreichbar ist => Sicherheitsrisiko

# Übung (ping script)

```sh
#!/bin/bash
 
for ((i=1; i < 255; i++)) ; do
    ip=192.168.16.$i
        timeout 0.05 ping -c1 $ip > /dev/null 2>&1
 
    if [ $? -eq 0 ]; then
        echo "$ip ist erreichbar"
    fi
done
```
**chmod +x pingscript.sh** => um es ausführen zu können
**timeout** => um wartezeiten zu verrringern


**Ausgabe:**
──(kali㉿kali)-[~/4AHITS-ITS-E-Pointner/Berichte]   
└─$ ./pingscript.sh    
192.168.14.50 ist erreichbar   => KALI   
192.168.14.51 ist erreichbar   => METASPLOITABLE    
192.168.14.254 ist erreichbar    

# Übung (host discovery)
**Recherche:** Nmap findet aktive Hosts, scannt Ports und erkennt laufende Dienste.

-sn => nur Host‑Discovery (kein Portscan)

### Alle aktiven Hostsim Subnetz im Labornetz ermitteln:

**Vorraussetzung**: (nmap installiert)   
sudo apt update   
sudo apt install -y nmap

```sh
┌──(kali㉿kali)-[~/4AHITS-ITS-E-Pointner/Berichte]
└─$ sudo nmap -sn 192.168.14.0/24
Starting Nmap 7.95 ( https://nmap.org ) at 2025-10-20 06:45 EDT
Nmap scan report for 192.168.14.50
Host is up (0.00061s latency).
MAC Address: 60:A4:B7:75:6F:A5 (TP-Link Limited)
Nmap scan report for 192.168.14.254
Host is up (0.00058s latency).
MAC Address: 1C:DF:0F:CA:41:01 (Cisco Systems)
Nmap scan report for 192.168.14.51
Host is up.
Nmap done: 256 IP addresses (3 hosts up) scanned in 2.41 seconds

```

# Übung (Alternativen)

**ARP (nur LAN)**
```sh
arp -a
sudo arping -c 2 192.168.14.5   
sudo arp-scan -I eth0 192.168.14.0/24
```

**TCP-Port-Probe**
```sh
hping3 -S -p 80 192.168.14.10   
nc -z -v 192.168.14.1 22-80   
masscan 192.168.14.0/24 -p0-65535 --rate=1000
```

**SNMP (Netzwerkgeräte)**
```sh
snmpget -v2c -c public 192.168.14.1 SNMPv2-MIB::sysName.0
```

**UDP-Probe**
```sh
ncat -u -z -v 192.168.14.10 161 # SNMP
echo "" | nc -u 192.168.14.20 53 -w1 # DNS
```

# Übung (Firewall)
## Verteidiger
1. ICMP filtern / Echo Requests blocken

```sh
iptables -A INPUT -p icmp --icmp-type echo-request -j DROP
```
=> Verhindert, dass Hosts auf ping antworten.


2. Monitoring / Netzwerksegmentierung

Labore und Netze segmentieren: Monitoring‑Systeme Ausnahmen (Whitelist) geben, damit legitimes Troubleshooting möglich bleibt


## Angreifer

1. Langsame/gestreckte Scans

Scans unter IDS/Rate‑Limits halten:   
```sh
 z.B. nmap --scan-delay 1s -sn 192.168.14.0/24
 ```
 oder sleep zwischen Pings => so bleibt man unter Erkennungs‑Schwellen. 

2. IP‑Spoofing / gefälschte Adressen

Echo‑Requests mit gefälschter Source senden; Antworten gehen nicht zurück an den Angreifer.   
 Beispiel mit hping3:
 ```sh
hping3 -1 --spoof 8.8.8.8 192.168.14.5
```
Spoofing kann Logik in Firewalls/IPS umgehen, aber erfordert oft Kontrolle über Rückkanal/Man‑in‑the‑Middle für brauchbare Daten.